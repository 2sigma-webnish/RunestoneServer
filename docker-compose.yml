version: '3'

services:
  db:
    image: postgres
    environment:
      POSTGRES_PASSWORD: 'runestone'
      POSTGRES_USER: 'runestone'
      POSTGRES_DB: 'runestone'

  runestone:
    image: runestone/server
    #command: tail -F peanutbutter
    volumes:
      - ./books:/srv/web2py/applications/runestone/books
      - ./controllers:/srv/web2py/applications/runestone/controllers
      - ./models:/srv/web2py/applications/runestone/models
      - ./modules:/srv/web2py/applications/runestone/modules
      - ./scripts:/srv/web2py/applications/runestone/scripts
      - ./views:/srv/web2py/applications/runestone/views
      - ./static:/srv/web2py/applications/runestone/static
    links:
      - db
    ports:
      - "8080:8080"
    environment:
      POSTGRES_PASSWORD: 'runestone'
      POSTGRES_USER: 'runestone'
      POSTGRES_DB: 'runestone'
